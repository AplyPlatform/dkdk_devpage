
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>DKDK OPEN API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;,&quot;javascript&quot;,&quot;python&quot;,&quot;http&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-f92e1b7e.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="http">http</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#fa255f0ccc" class="toc-h1 toc-link" data-title="소개">소개</a>
          </li>
          <li>
            <a href="#token" class="toc-h1 toc-link" data-title="Token 발급 받기">Token 발급 받기</a>
          </li>
          <li>
            <a href="#2c8de0f676" class="toc-h1 toc-link" data-title="사용자 등록/로그인/자동로그인/로그아웃/탈퇴">사용자 등록/로그인/자동로그인/로그아웃/탈퇴</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#50360a704a" class="toc-h2 toc-link" data-title="사용자 등록">사용자 등록</a>
                  </li>
                  <li>
                    <a href="#e225a6fd75" class="toc-h2 toc-link" data-title="로그인">로그인</a>
                  </li>
                  <li>
                    <a href="#217211959e" class="toc-h2 toc-link" data-title="자동 로그인">자동 로그인</a>
                  </li>
                  <li>
                    <a href="#3879f078a4" class="toc-h2 toc-link" data-title="로그아웃">로그아웃</a>
                  </li>
                  <li>
                    <a href="#5382ee72eb" class="toc-h2 toc-link" data-title="탈퇴하기">탈퇴하기</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#deprecated" class="toc-h1 toc-link" data-title="친구 요청/수락/헤어지기 [DEPRECATED]">친구 요청/수락/헤어지기 [DEPRECATED]</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#deprecated-2" class="toc-h2 toc-link" data-title="친구 요청하기 [DEPRECATED]">친구 요청하기 [DEPRECATED]</a>
                  </li>
                  <li>
                    <a href="#deprecated-3" class="toc-h2 toc-link" data-title="친구요청 수락하기 [DEPRECATED]">친구요청 수락하기 [DEPRECATED]</a>
                  </li>
                  <li>
                    <a href="#deprecated-4" class="toc-h2 toc-link" data-title="친구와 헤어지기 [DEPRECATED]">친구와 헤어지기 [DEPRECATED]</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#490e02d167" class="toc-h1 toc-link" data-title="친구 목록 관리">친구 목록 관리</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#5c18ce3eb7" class="toc-h2 toc-link" data-title="친구 등록하기">친구 등록하기</a>
                  </li>
                  <li>
                    <a href="#5573224242" class="toc-h2 toc-link" data-title="친구 삭제하기">친구 삭제하기</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#696426c5f1" class="toc-h1 toc-link" data-title="두근거림을 보낼 대상 관리">두근거림을 보낼 대상 관리</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#17a59b7419" class="toc-h2 toc-link" data-title="보낼 대상 설정/해제하기">보낼 대상 설정/해제하기</a>
                  </li>
                  <li>
                    <a href="#5ea8a71f20" class="toc-h2 toc-link" data-title="모든 친구를 대상으로 선택하기">모든 친구를 대상으로 선택하기</a>
                  </li>
                  <li>
                    <a href="#1" class="toc-h2 toc-link" data-title="1명만 대상으로 선택하기">1명만 대상으로 선택하기</a>
                  </li>
                  <li>
                    <a href="#ar" class="toc-h2 toc-link" data-title="AR위치 보낼 대상 설정/해제하기">AR위치 보낼 대상 설정/해제하기</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#75fe17074b" class="toc-h1 toc-link" data-title="사용자 검색/차단/해제">사용자 검색/차단/해제</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#46371f46ad" class="toc-h2 toc-link" data-title="사용자 검색하기">사용자 검색하기</a>
                  </li>
                  <li>
                    <a href="#63af46a5c8" class="toc-h2 toc-link" data-title="차단 목록에 추가">차단 목록에 추가</a>
                  </li>
                  <li>
                    <a href="#60e9835d1c" class="toc-h2 toc-link" data-title="차단 목록에서 삭제">차단 목록에서 삭제</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#19d7db93b7" class="toc-h1 toc-link" data-title="두근거림 보내고 받기">두근거림 보내고 받기</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#a33d387145" class="toc-h2 toc-link" data-title="소켓 접속 정보">소켓 접속 정보</a>
                  </li>
                  <li>
                    <a href="#2235171fe7" class="toc-h2 toc-link" data-title="두근거림 보내기">두근거림 보내기</a>
                  </li>
                  <li>
                    <a href="#2af7cbece5" class="toc-h2 toc-link" data-title="두근거림 전송을 중지하기">두근거림 전송을 중지하기</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#895733135b" class="toc-h1 toc-link" data-title="두근거림 패턴 등록/받기/삭제">두근거림 패턴 등록/받기/삭제</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#10054d7931" class="toc-h2 toc-link" data-title="두근거림 패턴 등록/수정하기">두근거림 패턴 등록/수정하기</a>
                  </li>
                  <li>
                    <a href="#bff49644b9" class="toc-h2 toc-link" data-title="두근거림 패턴 가져오기">두근거림 패턴 가져오기</a>
                  </li>
                  <li>
                    <a href="#f44375c861" class="toc-h2 toc-link" data-title="두근거림 패턴 삭제하기">두근거림 패턴 삭제하기</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#ai" class="toc-h1 toc-link" data-title="AI 기능">AI 기능</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#16cb2e87c5" class="toc-h2 toc-link" data-title="얼굴표정 분석 요청">얼굴표정 분석 요청</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#d3b24fc110" class="toc-h1 toc-link" data-title="사용자 정보 읽기/관리">사용자 정보 읽기/관리</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#deprecated-5" class="toc-h2 toc-link" data-title="친구요청 수신 기록 가져오기 [DEPRECATED]">친구요청 수신 기록 가져오기 [DEPRECATED]</a>
                  </li>
                  <li>
                    <a href="#deprecated-6" class="toc-h2 toc-link" data-title="친구요청 수신 기록 삭제하기 [DEPRECATED]">친구요청 수신 기록 삭제하기 [DEPRECATED]</a>
                  </li>
                  <li>
                    <a href="#7ac429b26c" class="toc-h2 toc-link" data-title="닉네임 수정">닉네임 수정</a>
                  </li>
                  <li>
                    <a href="#f02cbe2105" class="toc-h2 toc-link" data-title="이미지 업로드">이미지 업로드</a>
                  </li>
                  <li>
                    <a href="#heart" class="toc-h2 toc-link" data-title="주고받은 두근거림(Heart)수 받아오기">주고받은 두근거림(Heart)수 받아오기</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#94e36c2e1a" class="toc-h1 toc-link" data-title="웹소켓을 통해 이벤트 보내기">웹소켓을 통해 이벤트 보내기</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#0e928859b9" class="toc-h2 toc-link" data-title="웹소켓 접속하기">웹소켓 접속하기</a>
                  </li>
                  <li>
                    <a href="#heart-2" class="toc-h2 toc-link" data-title="heart 보내기">heart 보내기</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#heart-3" class="toc-h1 toc-link" data-title="친구 요청/터치/터치업/heart 이벤트받기">친구 요청/터치/터치업/heart 이벤트받기</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#deprecated-7" class="toc-h2 toc-link" data-title="친구요청 받기 [DEPRECATED]">친구요청 받기 [DEPRECATED]</a>
                  </li>
                  <li>
                    <a href="#heart-4" class="toc-h2 toc-link" data-title="Heart터치 이벤트받기">Heart터치 이벤트받기</a>
                  </li>
                  <li>
                    <a href="#heart-5" class="toc-h2 toc-link" data-title="Heart터치업 이벤트받기">Heart터치업 이벤트받기</a>
                  </li>
                  <li>
                    <a href="#heart-6" class="toc-h2 toc-link" data-title="heart 이벤트받기">heart 이벤트받기</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#805d652679" class="toc-h1 toc-link" data-title="푸시 메시지">푸시 메시지</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#dkdk-token" class="toc-h2 toc-link" data-title="사용자 토큰(dkdk-token)값 전송">사용자 토큰(dkdk-token)값 전송</a>
                  </li>
                  <li>
                    <a href="#deprecated-8" class="toc-h2 toc-link" data-title="친구 요청 수신 [DEPRECATED]">친구 요청 수신 [DEPRECATED]</a>
                  </li>
                  <li>
                    <a href="#touch" class="toc-h2 toc-link" data-title="두근거림 수신시: 터치(TOUCH)시">두근거림 수신시: 터치(TOUCH)시</a>
                  </li>
                  <li>
                    <a href="#up" class="toc-h2 toc-link" data-title="두근거림 수신 종료시 : 업(UP)시">두근거림 수신 종료시 : 업(UP)시</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><div class="fb-like" data-href="https://www.facebook.com/dkdkheart" data-width="100" data-layout="button_count" data-action="like" data-size="small" data-show-faces="false" data-share="false"></div></li>
            <li><a href='https://dev.dkdk.io'>DKDK 개발자홈</a></li>
            <li><a href='https://groups.google.com/forum/#!forum/dkdk_dev_aply'>두근두근 API 문의</a></li>
            <li><a href='https://facebook.com/dkdkheart'>DKDK 페이스북</a></li>
            <li><a href='https://dkdk.io/'>DKDK 홈</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
            <li>© 2020 <a href='https://aply.biz'>APLY Inc.</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='fa255f0ccc'>소개</h1>
<p>&#39;오늘도 어제처럼 두근두근&#39;</p>

<p>두근두근 Open API의 사용 설명서입니다.
인터넷이 지원되는 디바이스에서 친구나 지인의 두근두근 앱으로 두근거림을 보내거나 받을 수 있는 방법을 설명합니다.</p>

<p><img src="../imgs/dkdk_open_api.png" class="imgstyle"></p>

<p>Open API를 사용하는 첫번째 예제 입니다.
내가 만든 어떤 특별한 장치에서 친구의 스마트폰에 있는 두근두근으로 두근거림을 보낼 수 있습니다.</p>

<p><img src="../imgs/dkdk_open_api-2.png" class="imgstyle"></p>

<p>Open API를 사용하는 두번째 예제 입니다.
친구가 스마트폰의 두근두근을 터치할 경우 내가 만든 장치에서 두근거림을 받을 수 있습니다.</p>
<h1 id='token'>Token 발급 받기</h1>
<blockquote>
<p>API의 사용을 위해 DKDK Token을 발급 받기 위한 방법입니다.</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
</code></pre></div>
<blockquote>
</blockquote>

<p>사용자 등록/로그인 API를 제외한 모든 API는 사용자 Token을 http 헤더의 파라메터로 입력해야 사용할 수 있습니다.
순서는 다음과 같습니다.</p>

<ol>
<li>사용자가 로그인시 사용한 OAuth 서비스 종류, 서비스로 부터 받은 토큰, Push 전송용 디바이스 토큰, 닉네임 정보를 포함하여 사용자 등록 API호출</li>
<li>잠시후 사용자 토큰이 포함된 푸시 메시지 수신 (푸시 메시지 Decoding 방법은 하기의 푸시 메시지 항목 참조)</li>
<li>사용자 토큰을 별도로 저장 (로그아웃, 탈퇴시 삭제)</li>
</ol>

<p>또는,</p>

<ol>
<li>로그인 API호출</li>
<li>호출한 API 응답에 사용자 토큰 포함, 획득</li>
</ol>

<p>또는, 아래 경로에서 개발자Token을 발급 받으세요.</p>

<p><a href="https://dev.dkdk.io/">DKDK 개발자Token 발급</a>.</p>

<p>Token의 사용방법은 각 API의 설명을 참고해 주세요.</p>
<h1 id='2c8de0f676'>사용자 등록/로그인/자동로그인/로그아웃/탈퇴</h1><h2 id='50360a704a'>사용자 등록</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"register_v1", "deviceid" : "DEVICE_PUSH_TOKEN", "device_kind" : "DEVICE_KIND", "user_nickname":"USER_NICKNAME", "sns_kind" : "SNS_KIND", "sns_token" : "SNS_TOKEN", "language" : "LANGUAGE", "version" : "VERSION"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'register_v1'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'deviceid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'DEVICE_PUSH_TOKEN'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'device_kind'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'DEVICE_KIND'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_nickname'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_NICKNAME'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'sns_kind'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'SNS_KIND'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'sns_token'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"SNS_TOKEN"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'language'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"LANGUAGE"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'version'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"VERSION"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">register_v1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">deviceid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">DEVICE_PUSH_TOKEN</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">device_kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">DEVICE_KIND</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_nickname</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">USER_NICKNAME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">sns_kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">SNS_KIND</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">sns_token</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">SNS_TOKEN</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">language</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">LANGUAGE</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">VERSION</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"register_v1"</span><span class="p">,</span> <span class="s">"deviceid"</span> <span class="p">:</span> <span class="s">"DEVICE_PUSH_TOKEN"</span><span class="p">,</span> <span class="s">"device_kind"</span> <span class="p">:</span> <span class="s">"DEVICE_KIND"</span><span class="p">,</span> <span class="s">"user_nickname"</span><span class="p">:</span><span class="s">"USER_NICKNAME"</span><span class="p">,</span> <span class="s">"sns_kind"</span> <span class="p">:</span> <span class="s">"SNS_KIND"</span><span class="p">,</span> <span class="s">"sns_token"</span> <span class="p">:</span> <span class="s">"SNS_TOKEN"</span><span class="p">,</span> <span class="s">"language"</span> <span class="p">:</span> <span class="s">"LANGUAGE"</span><span class="p">,</span> <span class="s">"version"</span> <span class="p">:</span> <span class="s">"VERSION"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//성공</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"blah_blah_user_id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default_patterns"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"pattern_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pattern_uuid-1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"happy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pattern"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="w">
        </span><span class="nl">"image_idx"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bpm"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">이미</span><span class="w"> </span><span class="err">사용중인</span><span class="w"> </span><span class="err">닉네임일때</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"exist nickname"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">이미</span><span class="w"> </span><span class="err">등록한</span><span class="w"> </span><span class="err">사용자일때</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"already registered"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>사용자를 등록합니다</p>
<h3 id='http'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>action</td>
<td>&#39;register_v1&#39;를 입력합니다.</td>
</tr>
<tr>
<td>deviceid</td>
<td>푸시전송시 사용하는 토큰</td>
</tr>
<tr>
<td>device_kind</td>
<td>디바이스의 종류 (하기 디바이스 종류 테이블 참조)</td>
</tr>
<tr>
<td>user_nickname</td>
<td>사용자가 입력한 닉네임</td>
</tr>
<tr>
<td>sns_kind</td>
<td>사용자가 SNS Auth 로그인한 SNS의 종류 (하기 SNS 종류 테이블 참조)</td>
</tr>
<tr>
<td>sns_token</td>
<td>SNS Auth 로그인 후에 받은 (Google/Apple : IdToken, Facebook/Kakao/Naver : ACCESS_TOKEN)</td>
</tr>
<tr>
<td>language</td>
<td>사용자 디바이스의 언어값 (ISO 639 aplha-2 또는 aplha-3 코드 - 한국어: ko, 영어: en, 일어: ja, ...)</td>
</tr>
<tr>
<td>version</td>
<td>앱의 버전 (android에서의 VERSION_CODE와 동일값)</td>
</tr>
</tbody></table>
<h4 id='39-device_kind-39'>&#39;device_kind&#39;값 참조를 위한 디바이스 종류 테이블</h4>
<table><thead>
<tr>
<th>디바이스</th>
<th>값</th>
</tr>
</thead><tbody>
<tr>
<td>iOS디바이스</td>
<td>ios</td>
</tr>
<tr>
<td>안드로이드</td>
<td>android</td>
</tr>
<tr>
<td>갤럭시 기어</td>
<td>gear</td>
</tr>
<tr>
<td>HTTP서버</td>
<td>http</td>
</tr>
<tr>
<td>웹소켓서버</td>
<td>socket</td>
</tr>
</tbody></table>
<h4 id='39-sns_kind-39-sns'>&#39;sns_kind&#39;값 참조를 위한 SNS 종류 테이블</h4>
<table><thead>
<tr>
<th>SNS</th>
<th>값</th>
</tr>
</thead><tbody>
<tr>
<td>페이스북</td>
<td>facebook</td>
</tr>
<tr>
<td>구글</td>
<td>google</td>
</tr>
<tr>
<td>네이버</td>
<td>naver</td>
</tr>
<tr>
<td>카카오</td>
<td>kakao</td>
</tr>
<tr>
<td>애플</td>
<td>apple</td>
</tr>
<tr>
<td>애플 firebase</td>
<td>apple_firebase</td>
</tr>
</tbody></table>
<h2 id='e225a6fd75'>로그인</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"login", "deviceid" : "DEVICE_PUSH_TOKEN", "sns_kind" : "SNS_KIND", "sns_token" : "SNS_TOKEN", "version" : "VERSION"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'login'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'deviceid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'DEVICE_PUSH_TOKEN'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'sns_kind'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'SNS_KIND'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'sns_token'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"SNS_TOKEN"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'version'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"VERSION"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">login</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">deviceid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">DEVICE_PUSH_TOKEN</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">sns_kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">SNS_KIND</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">sns_token</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">SNS_TOKEN</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">VERSION</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"login"</span><span class="p">,</span> <span class="s">"deviceid"</span> <span class="p">:</span> <span class="s">"DEVICE_PUSH_TOKEN"</span><span class="p">,</span> <span class="s">"sns_kind"</span> <span class="p">:</span> <span class="s">"SNS_KIND"</span><span class="p">,</span> <span class="s">"sns_token"</span> <span class="p">:</span> <span class="s">"SNS_TOKEN"</span><span class="p">,</span> <span class="s">"version"</span> <span class="p">:</span> <span class="s">"VERSION"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//성공</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"blah_blah_user_id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"blah_blah_user_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dkdk_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"dkdk_token"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"imageData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"patterns"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"pattern_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pattern_uuid-1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"happy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pattern"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="w">
        </span><span class="nl">"image_idx"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bpm"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"pattern_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pattern_uuid-2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sad"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"pattern"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="w">
        </span><span class="nl">"image_idx"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bpm"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"denylist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_uuid-1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_nickname-1"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_uuid-2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_nickname-2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"friends"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_uuid-1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_nickname-1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"imageData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"target"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"shareloc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="err">//AR위치</span><span class="w"> </span><span class="err">전송</span><span class="w"> </span><span class="err">대상</span><span class="w"> </span><span class="err">여부</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_uuid-2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_nickname-2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"imageData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"target"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"shareloc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"friend_requests"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_uuid-1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_nickname-1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1234123412341"</span><span class="w"> </span><span class="err">//Timestamp</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_uuid-2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"friend_nickname-2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1234123412342"</span><span class="w"> </span><span class="err">//Timestamp</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">가입되지</span><span class="w"> </span><span class="err">않은</span><span class="w"> </span><span class="err">사용자</span><span class="w"> </span><span class="err">일때</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"not registered"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">기타</span><span class="w"> </span><span class="err">이유</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"some reason"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>SNS Auth 정보로 로그인합니다.</p>
<h3 id='http-2'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-2'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>action</td>
<td>&#39;login&#39;를 입력합니다.</td>
</tr>
<tr>
<td>deviceid</td>
<td>푸시전송시 사용하는 토큰</td>
</tr>
<tr>
<td>sns_kind</td>
<td>사용자의 Auth 로그인 SNS 종류 (하기 SNS 종류 테이블 참조)</td>
</tr>
<tr>
<td>sns_token</td>
<td>사용자의 Auth 로그인 후에 받은 토큰 (Google/Apple: IdToken, Facebook/Kakao/Naver : ACCESS_TOKEN)</td>
</tr>
<tr>
<td>version</td>
<td>앱의 버전 (android에서의 VERSION_CODE와 동일값)</td>
</tr>
</tbody></table>
<h4 id='39-sns_kind-39-sns-2'>&#39;sns_kind&#39;값 참조를 위한 SNS 종류 테이블</h4>
<table><thead>
<tr>
<th>SNS</th>
<th>값</th>
</tr>
</thead><tbody>
<tr>
<td>페이스북</td>
<td>facebook</td>
</tr>
<tr>
<td>구글</td>
<td>google</td>
</tr>
<tr>
<td>네이버</td>
<td>naver</td>
</tr>
<tr>
<td>카카오</td>
<td>kakao</td>
</tr>
<tr>
<td>애플</td>
<td>apple</td>
</tr>
</tbody></table>
<h2 id='217211959e'>자동 로그인</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"autologin", "deviceid" : "DEVICE_PUSH_TOKEN", "user_uuid" : "USER_UUID", "version" : "VERSION", "imageData" : "BASE64_ENCODED_IMAGE"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'autologin'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'deviceid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'DEVICE_PUSH_TOKEN'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'version'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"VERSION"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'imageData'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">autologin</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">deviceid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">DEVICE_PUSH_TOKEN</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">VERSION</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">imageData</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BASE64_ENCODED_IMAGE</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span><span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"autologin"</span><span class="p">,</span> <span class="s">"deviceid"</span> <span class="p">:</span> <span class="s">"DEVICE_PUSH_TOKEN"</span><span class="p">,</span> <span class="s">"user_uuid"</span> <span class="p">:</span> <span class="s">"USER_UUID"</span><span class="p">,</span> <span class="s">"version"</span> <span class="p">:</span> <span class="s">"VERSION"</span><span class="p">,</span> <span class="s">"imageData"</span> <span class="p">:</span> <span class="s">"BASE64_ENCODED_IMAGE"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//성공</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"blah_blah_user_id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"blah_blah_user_nickname"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dkdk_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"dkdk_token"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"imageData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">가입되지</span><span class="w"> </span><span class="err">않은</span><span class="w"> </span><span class="err">사용자</span><span class="w"> </span><span class="err">일때</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"not registered"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">기타</span><span class="w"> </span><span class="err">이유</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"some reason"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>기존 로그인시 저장했던 정보로 자동 로그인합니다.</p>
<h3 id='http-3'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-3'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;autologin&#39;를 입력합니다.</td>
</tr>
<tr>
<td>deviceid</td>
<td>푸시전송시 사용하는 토큰</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>version</td>
<td>앱 또는 디바이스의 버전 (android에서는 VERSION_CODE값)</td>
</tr>
<tr>
<td>imageData</td>
<td>base64 로 인코딩된 사용자 이미지</td>
</tr>
</tbody></table>
<h2 id='3879f078a4'>로그아웃</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"logout", "user_uuid" : "USER_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'logout'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">logout</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span><span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"logout"</span><span class="p">,</span> <span class="s">"user_uuid"</span> <span class="p">:</span> <span class="s">"USER_UUID"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//성공</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">기타</span><span class="w"> </span><span class="err">이유</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"some reason"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>로그아웃 합니다.</p>
<h3 id='http-4'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-4'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;logout&#39;를 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='5382ee72eb'>탈퇴하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"leave", "user_uuid" : "USER_UUID", "user_nickname" : "USER_NICKNAME"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'leave'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_nickname'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_NICKNAME'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">leave</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_nickname</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_NICKNAME</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span><span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"leave"</span><span class="p">,</span> <span class="s">"user_uuid"</span> <span class="p">:</span> <span class="s">"USER_UUID"</span><span class="p">,</span> <span class="s">"user_nickname"</span> <span class="p">:</span> <span class="s">"USER_NICKNAME"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//성공</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">기타</span><span class="w"> </span><span class="err">이유</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"some reason"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>탈퇴를 진행 합니다.</p>
<h3 id='http-5'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-5'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;leave&#39;를 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>user_nickname</td>
<td>사용자의 닉네임을 입력합니다.</td>
</tr>
</tbody></table>
<h1 id='deprecated'>친구 요청/수락/헤어지기 [DEPRECATED]</h1><h2 id='deprecated-2'>친구 요청하기 [DEPRECATED]</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"request", "user_uuid" : "MY_UUID", "friend_nickname" : "FRIEND_NICKNAME"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'request'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_nickname'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"FRIEND_NICKNAME"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_nickname</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_NICKNAME</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'request'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span>
    <span class="s">'friend_nickname'</span> <span class="p">:</span> <span class="s">"FRIEND_NICKNAME"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>친구를 등록합니다.</p>
<h3 id='http-6'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-6'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;request&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_nickname</td>
<td>친구로 요청할 대상의 닉네임 값을 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='deprecated-3'>친구요청 수락하기 [DEPRECATED]</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "action":"accept", "friend_uuid" : "FRIEND_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'accept'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'FRIEND_UUID'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>

</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>

<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">accept</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span> <span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'accept'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span>
    <span class="s">'friend_uuid'</span> <span class="p">:</span> <span class="s">'FRIEND_UUID'</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()


</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"result"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"friend_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"imageData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>친구요청을 수락합니다.</p>
<h3 id='http-7'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-7'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;accept&#39;를 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>친구요청 전송에 성공했을때 수신한 friend_uuid를 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='deprecated-4'>친구와 헤어지기 [DEPRECATED]</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "action":"bye", "friend_uuid" : "FRIEND_UUID"'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'bye'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"FRIEND_UUID"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bye</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'bye'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span>
    <span class="s">"friend_uuid"</span> <span class="p">:</span> <span class="s">"FRIEND_UUID"</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>친구목록에서 삭제 요청을 전송합니다.</p>
<h3 id='http-8'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-8'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;bye&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>친구요청 전송에 성공했을때 수신한 friend_uuid 값을 입력합니다.</td>
</tr>
</tbody></table>
<h1 id='490e02d167'>친구 목록 관리</h1><h2 id='5c18ce3eb7'>친구 등록하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"add_to_friend", "user_uuid" : "MY_UUID", "friend_uuid" : "FRIEND_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'add_to_friend'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"FRIEND_UUID"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">add_to_friend</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'add_to_friend'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span>
    <span class="s">'friend_uuid'</span> <span class="p">:</span> <span class="s">"FRIEND_UUID"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>사용자를 친구목록에 등록합니다.</p>
<h3 id='http-9'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-9'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;add_to_friend&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>친구로 등록할 대상의 user_uuid 값을 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='5573224242'>친구 삭제하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "action":"bye", "friend_uuid" : "FRIEND_UUID"'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'bye'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"FRIEND_UUID"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bye</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'bye'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span>
    <span class="s">"friend_uuid"</span> <span class="p">:</span> <span class="s">"FRIEND_UUID"</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>친구목록에서 친구를 삭제합니다.</p>
<h3 id='http-10'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-10'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;bye&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>친구목록에서 삭제할 user_uuid 값을 입력합니다.</td>
</tr>
</tbody></table>
<h1 id='696426c5f1'>두근거림을 보낼 대상 관리</h1><h2 id='17a59b7419'>보낼 대상 설정/해제하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"target_friend", "user_uuid" : "MY_UUID", "friend_uuid" : "FRIEND_UUID", "target" : true}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'target_friend'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"FRIEND_UUID"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'target'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">target_friend</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">target</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"target_friend"</span><span class="p">,</span> <span class="s">"user_uuid"</span> <span class="p">:</span> <span class="s">"MY_UUID"</span><span class="p">,</span> <span class="s">"friend_uuid"</span> <span class="p">:</span> <span class="s">"FRIEND_UUID"</span><span class="p">,</span> <span class="s">"target"</span> <span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>두근거림을 보낼 친구를 선택 또는 해제 합니다.</p>
<h3 id='http-11'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-11'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;target_friend&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>두근거림을 보낼 친구의 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>target</td>
<td>보낼 대상으로 선택하면 true, 그렇지 않으면 false를 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='5ea8a71f20'>모든 친구를 대상으로 선택하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"target_friend", "user_uuid" : "MY_UUID", "target_all" : true}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'target_friend'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'target_all'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">target_friend</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">target_all</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"target_friend"</span><span class="p">,</span> <span class="s">"user_uuid"</span> <span class="p">:</span> <span class="s">"MY_UUID"</span><span class="p">,</span> <span class="s">"target_all"</span> <span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>모든 친구를 두근거림을 보낼 대상으로 선택합니다.</p>
<h3 id='http-12'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-12'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;target_friend&#39;를 입력합니다.</td>
</tr>
<tr>
<td>target_all</td>
<td>true 를 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='1'>1명만 대상으로 선택하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"target_friend", "user_uuid" : "MY_UUID", "friend_uuid" : "FRIEND_UUID", "target_one" : true}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'target_friend'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'FRIEND_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'target_one'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">target_friend</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">target_one</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"target_friend"</span><span class="p">,</span> <span class="s">"user_uuid"</span> <span class="p">:</span> <span class="s">"MY_UUID"</span><span class="p">,</span> <span class="s">"friend_uuid"</span> <span class="p">:</span> <span class="s">"FRIEND_UUID"</span><span class="p">,</span> <span class="s">"target_one"</span> <span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>두근거림을 보낼 대상을 한명만 남기고 모두 선택해제 합니다.</p>
<h3 id='http-13'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-13'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;target_friend&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>두근거림을 보낼 친구의 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>target_one</td>
<td>true 를 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='ar'>AR위치 보낼 대상 설정/해제하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"share_loc_friend", "user_uuid" : "MY_UUID", "friend_uuid" : "FRIEND_UUID", "shareloc" : true}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'share_loc_friend'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"FRIEND_UUID"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'shareloc'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">share_loc_friend</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">shareloc</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"share_loc_friend"</span><span class="p">,</span> <span class="s">"user_uuid"</span> <span class="p">:</span> <span class="s">"MY_UUID"</span><span class="p">,</span> <span class="s">"friend_uuid"</span> <span class="p">:</span> <span class="s">"FRIEND_UUID"</span><span class="p">,</span> <span class="s">"shareloc"</span> <span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>AR위치를 보낼 친구를 선택 또는 해제 합니다.</p>
<h3 id='http-14'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-14'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;share_loc_friend&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>AR위치를 보낼 친구의 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>shareloc</td>
<td>보낼 대상으로 선택하면 true, 그렇지 않으면 false를 입력합니다.</td>
</tr>
</tbody></table>
<h1 id='75fe17074b'>사용자 검색/차단/해제</h1><h2 id='46371f46ad'>사용자 검색하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"find_friend", "user_uuid" : "MY_UUID", "friend_nickname" : "FRIEND_NICKNAME"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'find_friend'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_nickname'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'FRIEND_NICKNAME'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">find_friend</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_nickname</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_NICKNAME</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'find_friend'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span>
    <span class="s">'friend_nickname'</span> <span class="p">:</span> <span class="s">'FRIEND_NICKNAME'</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"imageData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="w"> </span><span class="err">//(이미지가</span><span class="w"> </span><span class="err">있을</span><span class="w"> </span><span class="err">경우)</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//친구가</span><span class="w"> </span><span class="err">없을</span><span class="w"> </span><span class="err">경우</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reason"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"no user"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//daction</span><span class="w"> </span><span class="err">에</span><span class="w"> </span><span class="err">'more'</span><span class="w"> </span><span class="err">파라메터</span><span class="w"> </span><span class="err">입력시</span><span class="w"> </span><span class="err">응답</span><span class="w"> </span><span class="err">(최대</span><span class="w"> </span><span class="mi">5</span><span class="err">개</span><span class="w"> </span><span class="err">항목</span><span class="w"> </span><span class="err">응답)</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"FRIEND_NICKNAME"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"imageData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="w"> </span><span class="err">//(이미지가</span><span class="w"> </span><span class="err">있을</span><span class="w"> </span><span class="err">경우)</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"user_uuid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"FRIEND_UUID_2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_nickname"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"FRIEND_NICKNAME_2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"imageData"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="w"> </span><span class="err">//(이미지가</span><span class="w"> </span><span class="err">있을</span><span class="w"> </span><span class="err">경우)</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>닉네임으로 사용자를 검색합니다.</p>
<h3 id='http-15'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-15'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;find_friend&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_nickname</td>
<td>검색할 사용자의 닉네임을 입력합니다.</td>
</tr>
<tr>
<td>daction</td>
<td>이 파라메터에 &#39;more&#39;를 입력할 경우, friend_nickname 에 입력한 문구가 포함되어 있는 닉네임을 가진 모든 사용자 목록을 배열로 응답합니다(옵션)</td>
</tr>
</tbody></table>
<h2 id='63af46a5c8'>차단 목록에 추가</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"add_to_deny", "user_uuid" : "MY_UUID", "target_user_uuid" : "USER_UUID", "target_user_nickname" : "USER_NICKNAME"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'add_to_deny'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'target_user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"USER_UUID"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'target_user_nickname'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"USER_NICKNAME"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">add_to_deny</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">target_user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">target_user_nickname</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_NICKNAME</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, added.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'add_to_deny'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'MY_UUID'</span><span class="p">,</span>
    <span class="s">'target_user_uuid'</span> <span class="p">:</span> <span class="s">"USER_UUID"</span><span class="p">,</span>
    <span class="s">'target_user_nickname'</span> <span class="p">:</span> <span class="s">"USER_NICKNAME"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>사용자를 차단목록에 추가합니다.</p>
<h3 id='http-16'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-16'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;add_to_deny&#39;를 입력합니다.</td>
</tr>
<tr>
<td>target_user_uuid</td>
<td>차단할 사용자의 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>target_user_nickname</td>
<td>차단할 사용자의 닉네임 값을 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='60e9835d1c'>차단 목록에서 삭제</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"remove_from_deny", "user_uuid" : "MY_UUID", "target_user_uuid" : "USER_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'remove_from_deny'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'target_user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"USER_UUID"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">remove_from_deny</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">target_user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, added.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'remove_from_deny'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'MY_UUID'</span><span class="p">,</span>
    <span class="s">'target_user_uuid'</span> <span class="p">:</span> <span class="s">"USER_UUID"</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>차단 목록에서 사용자를 삭제합니다.</p>
<h3 id='http-17'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-17'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;remove_from_deny&#39;를 입력합니다.</td>
</tr>
<tr>
<td>target_user_uuid</td>
<td>차단 해제 할 사용자의 user_uuid 값을 입력합니다.</td>
</tr>
</tbody></table>
<h1 id='19d7db93b7'>두근거림 보내고 받기</h1><h2 id='a33d387145'>소켓 접속 정보</h2>
<p>서버 소켓에 접속하면 Push를 통해 받게 되는 (이벤트)정보를 소켓을 통해 받을 수 있게 됩니다.
만약 소켓 연결이 해제될 경우, Push를 통해 (이벤트)정보를 받을 수 있습니다.
이에, Heart를 주고/받는 화면에 진입하면 소켓에 접속하고 해당 화면을 빠져 나올 경우 소켓 접속을 해제해 주세요.  </p>

<p>접속 URL : wss://drp326sta1.execute-api.ap-northeast-2.amazonaws.com/prod</p>

<table><thead>
<tr>
<th>헤더 파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='2235171fe7'>두근거림 보내기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "action":"touch", "friend_uuids":["FRIEND_UUID_1","FRIEND_UUID_2"], "pattern_uuid" : "PATTERN_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'touch'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'pattern_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'PATTERN_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuids'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"FRIEND_UUID_1"</span><span class="p">,</span> <span class="s2">"FRIEND_UUID_2"</span><span class="p">);</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">touch</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pattern_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">PATTERN_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuids</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">FRIEND_UUID_1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">FRIEND_UUID_2</span><span class="dl">"</span><span class="p">]};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'touch'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span>
    <span class="s">'pattern_uuid'</span> <span class="p">:</span> <span class="s">'PATTERN_UUID'</span><span class="p">,</span>
    <span class="s">'friend_uuids'</span> <span class="p">:</span> <span class="p">[</span><span class="s">'FRIEND_UUID_1'</span><span class="p">,</span> <span class="s">'FRIEND_UUID-2'</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>(소켓연결이 되어 있지 않을 경우)친구에게 나의 두근거림을 전송합니다.</p>
<h3 id='http-18'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-18'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;touch&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuids</td>
<td>두근거림을 전송할 친구의 user_uuid를 입력합니다. (배열)</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>두근거림의 패턴 pattern_uuid를 입력합니다. 입력하지 않으면 기본 패턴이 전송됩니다. (두근거림 패턴 등록하기 참고) (Optional)</td>
</tr>
</tbody></table>
<h2 id='2af7cbece5'>두근거림 전송을 중지하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "heartcount" : "20", "action":"up", "friend_uuids":["FRIEND_UUID_1", "FRIEND_UUID_2"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'up'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'heartcount'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'20'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuids'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"FRIEND_UUID_1"</span><span class="p">,</span> <span class="s2">"FRIEND_UUID_2"</span><span class="p">);</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">up</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">heartcount</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">20</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuids</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">FRIEND_UUID_1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">FRIEND_UUID_2</span><span class="dl">"</span><span class="p">]};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'up'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span>
    <span class="s">'heartcount'</span> <span class="p">:</span> <span class="s">'20'</span><span class="p">,</span>
    <span class="s">'friend_uuids'</span> <span class="p">:</span> <span class="p">[</span><span class="s">'FRIEND_UUID_1'</span><span class="p">,</span> <span class="s">'FRIEND_UUID_2'</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>(소켓연결이 되어 있지 않을 경우) 친구에게 보내던 두근거림의 전송을 중지합니다</p>
<h3 id='http-19'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-19'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;up&#39;을 입력합니다.</td>
</tr>
<tr>
<td>heartcount</td>
<td>전송한 두근거림 수를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuids</td>
<td>두근거림을 전송하던 친구들의 user_uuid 목록(배열)</td>
</tr>
</tbody></table>
<h1 id='895733135b'>두근거림 패턴 등록/받기/삭제</h1><h2 id='10054d7931'>두근거림 패턴 등록/수정하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "action":"patternupload", "pattern":[0,100,5,100], "pattern_name" : "MY PATTERN NAME", "bpm" : 120, "image_idx" : 2}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'patternupload'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'pattern'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'pattern_name'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY PATTERN NAME'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'bpm'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">120</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'image_idx'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">patternupload</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pattern</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span> <span class="dl">"</span><span class="s2">pattern_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY PATTERN NAME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">bpm</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="dl">"</span><span class="s2">image_idx</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'patternupload'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span>
    <span class="s">'pattern'</span> <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span>
    <span class="s">'pattern_name'</span> <span class="p">:</span> <span class="s">'MY PATTERN NAME'</span><span class="p">,</span>
    <span class="s">'bpm'</span> <span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
    <span class="s">'image_idx'</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>나의 두근거림 패턴을 등록합니다.</p>
<h3 id='http-20'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-20'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;patternupload&#39;를 입력합니다.</td>
</tr>
<tr>
<td>pattern</td>
<td>진동패턴 값을 입력합니다.(배열 / 하기&#39;참고&#39;의 내용을 참고해주세요)</td>
</tr>
<tr>
<td>pattern_name</td>
<td>패턴의 이름을 입력합니다.</td>
</tr>
<tr>
<td>bpm</td>
<td>분당심박수(long)</td>
</tr>
<tr>
<td>image_idx</td>
<td>패턴 이미지(감정)의 인덱스 값(integer)</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>이 값을 지정하면 동일한 pattern_uuid 값을 가지는 패턴을 업데이트 합니다. (optional)</td>
</tr>
</tbody></table>
<h3 id='90b567db91'>응답</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>pattern_uuid</td>
<td>등록된 두근거림 패턴의 pattern_uuid</td>
</tr>
</tbody></table>
<h3 id='b767d08a0d'>참고</h3>
<p>진동패턴의 모습은 아래와 같습니다.</p>

<p><code>[대기시간,진동시간,대기시간,진동시간, ...]</code></p>

<p>예제:
<code>[100,200,100,300,10,500]</code></p>
<h2 id='bff49644b9'>두근거림 패턴 가져오기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "action":"pattern", "friend_uuid":"FRIEND_UUID", "pattern_uuid":"PATTERN_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'pattern'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'FRIEND_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'pattern_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'PATTERN_UUID'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">pattern</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pattern_uuid</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">PATTERN_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'pattern'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span>
    <span class="s">'friend_uuid'</span> <span class="p">:</span> <span class="s">'FRIEND_UUID'</span><span class="p">,</span>
    <span class="s">'pattern_uuid'</span> <span class="p">:</span> <span class="s">'PATTERN_UUID'</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern"</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="w">
    </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern_name"</span><span class="p">:</span><span class="s2">"PATTERN_NAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bpm"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">이</span><span class="w"> </span><span class="err">오브젝트가</span><span class="w"> </span><span class="err">존재하지</span><span class="w"> </span><span class="err">않을</span><span class="w"> </span><span class="err">경우</span><span class="w"> </span><span class="mi">0</span><span class="err">으로</span><span class="w"> </span><span class="err">초기화</span><span class="w">
    </span><span class="nl">"image_idx"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">//이</span><span class="w"> </span><span class="err">오브젝트가</span><span class="w"> </span><span class="err">존재하지</span><span class="w"> </span><span class="err">않을</span><span class="w"> </span><span class="err">경우</span><span class="w"> </span><span class="mi">8</span><span class="err">로</span><span class="w"> </span><span class="err">초기화</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>친구의 두근거림 패턴을 내려 받습니다.</p>
<h3 id='http-21'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-21'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;pattern&#39;을 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>두근거림 패턴을 가지고 있는 친구의 user_uuid</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>내려받을 두근거림 패턴의 pattern_uuid</td>
</tr>
</tbody></table>
<h3 id='90b567db91-2'>응답</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>pattern</td>
<td>진동 패턴 (배열)</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>두근거림 패턴의 pattern_uuid</td>
</tr>
<tr>
<td>pattern_name</td>
<td>두근거림 패턴의 이름</td>
</tr>
<tr>
<td>image_idx</td>
<td>패턴 이미지 인덱스 (int)</td>
</tr>
<tr>
<td>bpm</td>
<td>분당심박수 (long)</td>
</tr>
</tbody></table>
<h3 id='b767d08a0d-2'>참고</h3>
<p>진동패턴의 모습은 아래와 같습니다.</p>

<p><code>[대기시간,진동시간,대기시간,진동시간, ...]</code></p>

<p>예제:
<code>[100,200,100,300,10,500]</code></p>

<p>웹브라우저와 웹뷰등에서 Javascript를 통해 진동을 표현할 경우, 패턴의 순서에 유의해 주세요.
즉, &#39;두근거림 패턴 가져오기&#39; API를 이용해서 패턴을 내려 받았을 경우, Javascript에서 진동을 표현하기 위해서는 패턴의 첫번째 아이템을 삭제한 후 사용하면 됩니다.</p>

<p>예제:
<code>var pattern = downloaded_pattern.shift();</code></p>

<p>웹브라우저, 웹뷰에서 두근거림 패턴을 사용하는 방법은 아래의 경로를 참고해 주세요.</p>

<ul>
<li><a href=https://dev.dkdk.io/example/index.html#example1 target=new>https://dev.dkdk.io/example/index.html#example1</a></li>
</ul>

<p>iOS의 Cordova 환경에서 두근거림 패턴을 사용하는 방법은 아래의 경로를 참고해 주세요.</p>

<ul>
<li><a href=https://dev.dkdk.io/example/index.html#example2 target=new>https://dev.dkdk.io/example/index.html#example2</a></li>
</ul>
<h2 id='f44375c861'>두근거림 패턴 삭제하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "action":"patternremove", "pattern_uuid":"PATTERN_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'patternremove'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'pattern_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'PATTERN_UUID'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">patternremove</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">pattern_uuid</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">PATTERN_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'patternremove'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span>
    <span class="s">'pattern_uuid'</span> <span class="p">:</span> <span class="s">'PATTERN_UUID'</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>나의 두근거림 패턴을 삭제합니다.</p>
<h3 id='http-22'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-22'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;patternremove&#39;를 입력합니다.</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>삭제할 두근거림 패턴의 pattern_uuid</td>
</tr>
</tbody></table>
<h1 id='ai'>AI 기능</h1><h2 id='16cb2e87c5'>얼굴표정 분석 요청</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"get_face_emotion", "user_uuid":"USER_UUID",  "language":"LANGUAGE", "imageData" : "BASE64_ENCODED_IMAGE"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'get_face_emotion'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'imageData'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY BASE64_ENCODED_IMAGE NAME'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'language'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'LANGUAGE'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">get_face_emotion</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span>  <span class="dl">"</span><span class="s2">language</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">LANGUAGE</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">imageData</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BASE64_ENCODED_IMAGE</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"action"</span><span class="p">:</span><span class="s">"get_face_emotion"</span><span class="p">,</span> <span class="s">"user_uuid"</span><span class="p">:</span><span class="s">"USER_UUID"</span><span class="p">,</span>  <span class="s">"language"</span><span class="p">:</span><span class="s">"LANGUAGE"</span><span class="p">,</span> <span class="s">"imageData"</span> <span class="p">:</span> <span class="s">"BASE64_ENCODED_IMAGE"</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"response"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"exp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"행복해 보여요"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"emotion"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"happy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"val"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.8</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"exp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"슬픈가 보다"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"emotion"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sad"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"val"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"exp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"화가났냐?"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"emotion"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"angry"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"val"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"emotion"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"happy"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//실패시</span><span class="w"> </span><span class="err">(감정분석</span><span class="w"> </span><span class="err">실패)</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"emotion"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>얼굴 이미지를 전송하여 분석한 감정 상태 값을 받습니다</p>
<h3 id='http-23'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-23'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;get_face_emotion&#39;를 입력합니다.</td>
</tr>
<tr>
<td>imageData</td>
<td>Base64로 인코딩된 이미지(JPG) 데이터</td>
</tr>
<tr>
<td>language</td>
<td>사용자 디바이스의 언어값 (ISO 639 aplha-2 또는 aplha-3 코드 - 한국어: ko, 영어: en, 일어: ja, ...)</td>
</tr>
</tbody></table>
<h1 id='d3b24fc110'>사용자 정보 읽기/관리</h1><h2 id='deprecated-5'>친구요청 수신 기록 가져오기 [DEPRECATED]</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"get_requests", "user_uuid" : "MY_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'get_requests'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">get_requests</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'get_requests'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"user_nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575355454328</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"user_nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NICKNAME2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"user_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_UUID2"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575357228660</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>(서버에 기록되어 있는) 수신한 친구요청 기록 가져옵니다.</p>
<h3 id='http-24'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-24'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;get_requests&#39;를 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='deprecated-6'>친구요청 수신 기록 삭제하기 [DEPRECATED]</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"remove_requests", "user_uuid" : "MY_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'remove_requests'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">remove_requests</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MY_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'remove_requests'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>(서버에 기록되어 있는) 수신한 친구요청 기록 모두를 삭제합니다.</p>
<h3 id='http-25'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-25'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;remove_requests&#39;를 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='7ac429b26c'>닉네임 수정</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"update_nickname", "user_uuid" : "USER_UUID", "user_nickname" : "USER_NICKNAME"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'update_nickname'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_nickname'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"USER_NICKNAME"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">update_nickname</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_nickname</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_NICKNAME</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span><span class="s">'update_nickname'</span><span class="p">,</span> <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span> <span class="s">'user_nickname'</span> <span class="p">:</span> <span class="s">'USER_NICKNAME'</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>내 프로필 닉네임 정보를 수정 합니다.</p>
<h3 id='http-26'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-26'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;update_nickname&#39;을 입력합니다.</td>
</tr>
<tr>
<td>user_nickname</td>
<td>사용자가 입력한 닉네임</td>
</tr>
</tbody></table>
<h2 id='f02cbe2105'>이미지 업로드</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"action":"deviceid", "device_id" : "DEVICE_PUSH_TOKEN", "user_uuid" : "USER_UUID", "user_nickname" : "USER_NICKNAME", "version" : "VERSION_CODE", "imageData" : "BASE64_ENCODED_IMAGE"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'deviceid'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'MY_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'device_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'DEVICE_PUSH_TOKEN'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_nickname'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"USER_NICKNAME"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'version'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"VERSION_CODE"</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'imageData'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"BASE64_ENCODED_IMAGE"</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">deviceid</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">device_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">DEVICE_PUSH_TOKEN</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_nickname</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_NICKNAME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">version</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">VERSION_CODE</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">imageData</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BASE64_ENCODED_IMAGE</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Successfully, recorded.</span><span class="dl">"</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span><span class="s">'deviceid'</span><span class="p">,</span> <span class="s">'device_id'</span> <span class="p">:</span> <span class="s">'DEVICE_PUSH_TOKEN'</span><span class="p">,</span> <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span> <span class="s">'user_nickname'</span> <span class="p">:</span> <span class="s">'USER_NICKNAME'</span><span class="p">,</span> <span class="s">'version'</span> <span class="p">:</span> <span class="s">'VERSION_CODE'</span><span class="p">,</span> <span class="s">'imageData'</span> <span class="p">:</span> <span class="s">'BASE64_ENCODED_IMAGE'</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 API는 요청에 성공했을 경우 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>내 디바이스의 정보를 업로드/갱신 합니다.</p>
<h3 id='http-27'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-27'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;deviceid&#39;를 입력합니다.</td>
</tr>
<tr>
<td>device_id</td>
<td>푸시전송시 사용하는 토큰</td>
</tr>
<tr>
<td>user_nickname</td>
<td>사용자가 입력한 닉네임</td>
</tr>
<tr>
<td>version</td>
<td>앱의 버전 (android에서의 VERSION_CODE와 동일값)</td>
</tr>
<tr>
<td>imageData</td>
<td>base64 로 인코딩된 사용자 이미지</td>
</tr>
</tbody></table>
<h2 id='heart'>주고받은 두근거림(Heart)수 받아오기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
curl <span class="nt">-H</span> <span class="s2">"dkdk-token: DKDKTOKEN"</span> <span class="nt">-H</span> <span class="s2">"Content-type: application/json"</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"user_uuid":"USER_UUID", "action":"history", "friend_uuid" : "FRIEND_UUID"}'</span> https://api.dkdk.io/v2/dkdk

</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'action'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'history'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'user_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'USER_UUID'</span><span class="p">;</span>
<span class="nv">$body</span><span class="p">[</span><span class="s1">'friend_uuid'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'FRIEND_UUID'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Content-Type: application/json'</span><span class="p">,</span>
        <span class="s1">'dkdk-token: DKDKTOKEN'</span>
<span class="p">);</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.dkdk.io/v2/dkdk'</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span>  <span class="nv">$headers</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span>    <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$body</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="c1">//$json_list= json_decode($response, true);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$response</span><span class="p">;</span>


</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
<span class="kd">var</span> <span class="nx">jdata</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">action</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">history</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">user_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">USER_UUID</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">friend_uuid</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">FRIEND_UUID</span><span class="dl">"</span><span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="na">url</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">https://api.dkdk.io/v2/dkdk</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">dataType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">contentType</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">crossDomain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
       <span class="na">cache</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">data</span> <span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jdata</span><span class="p">),</span>
       <span class="na">type</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
       <span class="na">async</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
       <span class="na">beforeSend</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">dkdk-token</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DKDKTOKEN</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
       <span class="na">success</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">r</span><span class="p">));</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">result</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
           <span class="c1">//r.data;</span>
         <span class="p">}</span>
       <span class="p">},</span>
       <span class="na">error</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">status</span><span class="p">,</span><span class="nx">error</span><span class="p">){</span>
           <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">code:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">message:</span><span class="dl">"</span><span class="o">+</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="o">+</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="o">+</span><span class="dl">"</span><span class="s2">error:</span><span class="dl">"</span><span class="o">+</span><span class="nx">error</span><span class="p">);</span>
       <span class="p">}</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
    <span class="s">'dkdk-token'</span> <span class="p">:</span> <span class="s">'DKDKTOKEN'</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'action'</span><span class="p">:</span> <span class="s">'history'</span><span class="p">,</span>
    <span class="s">'user_uuid'</span> <span class="p">:</span> <span class="s">'USER_UUID'</span><span class="p">,</span>
    <span class="s">'friend_uuid'</span> <span class="p">:</span> <span class="s">'FRIEND_UUID'</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://api.dkdk.io/v2/dkdk'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">response</span><span class="p">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="s">'response.json()

</span></code></pre></div>
<blockquote>
<p>상기의 명령은 아래와 같이 JSON 구조로 응답합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="nl">"result"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
 </span><span class="nl">"sentdata"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"count"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"2018-03-27 22:47:30"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"count"</span><span class="p">:</span><span class="s2">"12"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"2018-03-28 01:04:45"</span><span class="w">
</span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="nl">"recvdata"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"count"</span><span class="p">:</span><span class="s2">"37"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"2018-03-27 22:47:30"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"count"</span><span class="p">:</span><span class="s2">"83"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"2018-03-28 01:04:45"</span><span class="w">
</span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>나의 친구가 주고받은 두근거림(Heart)의 수를 확인합니다.</p>
<h3 id='http-28'>HTTP 요청</h3>
<p><code>POST https://api.dkdk.io/v2/dkdk</code></p>
<h3 id='url-28'>URL 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;history&#39;를 입력합니다.</td>
</tr>
<tr>
<td>friend_uuid</td>
<td>친구의 user_uuid를 입력합니다.</td>
</tr>
</tbody></table>
<h3 id='90b567db91-3'>응답</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>sentdata</td>
<td>보낸 두근거림 수 정보가 담긴 배열</td>
</tr>
<tr>
<td>recvdata</td>
<td>받은 두근거림 수 정보가 담긴 배열</td>
</tr>
<tr>
<td>count</td>
<td>두근거림 수</td>
</tr>
<tr>
<td>time</td>
<td>두근거림을 보내거나 받은 시각</td>
</tr>
</tbody></table>
<h1 id='94e36c2e1a'>웹소켓을 통해 이벤트 보내기</h1><h2 id='0e928859b9'>웹소켓 접속하기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
<span class="nv">$wscat</span> <span class="nt">-c</span> wss://socketinterface.dkdk.io/v2 <span class="nt">-h</span> dkdk-token:MYTOKEN <span class="nt">-h</span> user_uuid:MY_UUID
Connected <span class="o">(</span>press CTRL+C to quit<span class="o">)</span>

</code></pre></div>
<p>웹소켓 서버에 접속합니다.
(두근거림 주고받기 화면을 띄웠을 경우 접속하고, 화면을 종료 할 경우 연결을 끊는 것이 좋습니다.)</p>
<h3 id='websocket'>WebSocket 요청</h3>
<p><code>wss://socketinterface.dkdk.io/v2</code></p>
<h3 id='c0ab682e81'>헤더 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>dkdk-token</td>
<td>사용자 Token 값을 헤더에 입력합니다.</td>
</tr>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 헤더에 입력합니다.</td>
</tr>
</tbody></table>
<h2 id='heart-2'>heart 보내기</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>
<span class="nv">$wscat</span> <span class="nt">-c</span> wss://socketinterface.dkdk.io/v2 <span class="nt">-h</span> dkdk-token:MYTOKEN <span class="nt">-h</span> user_uuid:MY_UUID
Connected <span class="o">(</span>press CTRL+C to quit<span class="o">)</span>
<span class="o">{</span><span class="s2">"action"</span>: <span class="s2">"sendMessage"</span>, <span class="s2">"user_uuid"</span>:<span class="s2">"USER_UUID"</span>, <span class="s2">"user_nickname"</span> : <span class="s2">"USER_NICKNAME"</span>, <span class="s2">"doaction"</span>:<span class="s2">"heart"</span>, <span class="s2">"friend_uuids"</span>:[<span class="s2">"FRIEND_UUID1"</span><span class="o">]</span>, <span class="s2">"pattern_uuid"</span>:<span class="s2">"PATTERN_UUID"</span>, <span class="s2">"friend_shareloc_uuids"</span> : <span class="o">[</span><span class="s2">"FRIEND_UUID1"</span>, <span class="s2">"FRIEND_UUID2"</span><span class="o">]</span>, <span class="s2">"lat"</span> : 123.1341, <span class="s2">"lng"</span> : 36.134, <span class="s2">"alt"</span> : 12.33<span class="o">}</span>
</code></pre></div>
<p>웹소켓 서버로 heart이벤트를 전송합니다.
(heart를 주고 받는 애니메이션의 간격을 5초로 설정합니다. 나의 heart가 5초후에 상대에게 도달할때마다 이 API를 호출합니다.
마찬가지로, heart를 수신하고 있는 상대방은 약 10초 간격으로 수신여부를 확인하고 만약 10초동안 수신한 기록이 없다면 상대로 부터 &#39;up&#39; 이벤트를 받은 것으로 간주하고 처리합니다.)</p>
<h3 id='c0ab682e81-2'>헤더 파라메터</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>user_uuid</td>
<td>사용자 등록 후 부여받는 user_uuid 값을 입력합니다.</td>
</tr>
<tr>
<td>action</td>
<td>&#39;sendMessage&#39;를 입력합니다.</td>
</tr>
<tr>
<td>doaction</td>
<td>&#39;heart&#39;를 입력합니다.</td>
</tr>
<tr>
<td>user_nickname</td>
<td>사용자 닉네임을 입력합니다 (Optional)</td>
</tr>
<tr>
<td>friend_uuids</td>
<td>친구의 user_uuid를 입력합니다. (Array)</td>
</tr>
<tr>
<td>friend_shareloc_uuids</td>
<td>내 AR위치를 전송받을 친구의 user_uuid를 입력합니다. (Array)</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>패턴 UUID를 입력합니다. 입력하지 않을 경우 사용자의 패턴들 중 첫번째 패턴의 uuid가 입력됩니다.</td>
</tr>
<tr>
<td>lat</td>
<td>Latitude 좌표를 입력합니다 (double)</td>
</tr>
<tr>
<td>lng</td>
<td>Longitude 좌표를 입력합니다 (double)</td>
</tr>
<tr>
<td>alt</td>
<td>고도(Altitude) 값을 입력합니다 (double)</td>
</tr>
</tbody></table>
<h1 id='heart-3'>친구 요청/터치/터치업/heart 이벤트받기</h1><h2 id='deprecated-7'>친구요청 받기 [DEPRECATED]</h2><div class="highlight"><pre class="highlight http tab-http"><code><span class="err">
</span><span class="nf">POST</span> <span class="nn">/</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">YOUR-HOST-NAME</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">DKDK Service</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"request"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<blockquote>
<p>JSON 구조로 송신합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//ANDROID,</span><span class="w"> </span><span class="err">iOS</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"request"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfrom"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//TIZEN,</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">SERVER</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"request"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"from"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>지인으로 부터 친구요청을 받습니다.</p>
<h3 id='android-ios-deprecated'>친구요청 수신 데이터 (ANDROID, iOS) [DEPRECATED]</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>mstate</td>
<td>&#39;request&#39;</td>
</tr>
<tr>
<td>mfrom</td>
<td>친구의 닉네임</td>
</tr>
<tr>
<td>muuid</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>curdate</td>
<td>친구요청 송신 시각</td>
</tr>
</tbody></table>
<h3 id='tizen-http-server-deprecated'>친구요청 수신 데이터 (TIZEN, HTTP SERVER) [DEPRECATED]</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>&#39;request&#39;</td>
</tr>
<tr>
<td>from</td>
<td>친구의 닉네임</td>
</tr>
<tr>
<td>fromid</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>curdate</td>
<td>친구요청 송신 시각</td>
</tr>
</tbody></table>
<h2 id='heart-4'>Heart터치 이벤트받기</h2><div class="highlight"><pre class="highlight http tab-http"><code><span class="err">
</span><span class="nf">POST</span> <span class="nn">/</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">YOUR-HOST-NAME</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">DKDK Service</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"touch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<blockquote>
<p>JSON 구조로 송신합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//ANDROID,</span><span class="w"> </span><span class="err">iOS</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"touch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfrom"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mid"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//TIZEN,</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">SERVER</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"touch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"from"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>친구가 Heart를 터치하면 이 이벤트를 받습니다.</p>
<h3 id='heart-android-ios'>Heart터치 수신 데이터 (ANDROID, iOS)</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>mstate</td>
<td>&#39;touch&#39;</td>
</tr>
<tr>
<td>mfrom</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>mid</td>
<td>친구의 닉네임</td>
</tr>
<tr>
<td>muuid</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>친구의 패턴 UUID</td>
</tr>
<tr>
<td>curdate</td>
<td>Heart터치 송신 시각</td>
</tr>
</tbody></table>
<h3 id='heart-tizen-http-server'>Heart터치 수신 데이터 (TIZEN, HTTP SERVER)</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>&#39;touch&#39;</td>
</tr>
<tr>
<td>from</td>
<td>친구의 닉네임</td>
</tr>
<tr>
<td>fromid</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>친구의 패턴 uuid</td>
</tr>
<tr>
<td>curdate</td>
<td>Heart터치 송신 시각</td>
</tr>
</tbody></table>
<h2 id='heart-5'>Heart터치업 이벤트받기</h2><div class="highlight"><pre class="highlight http tab-http"><code><span class="err">
</span><span class="nf">POST</span> <span class="nn">/</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">YOUR-HOST-NAME</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">DKDK Service</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"up"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<blockquote>
<p>JSON 구조로 송신합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//ANDROID,</span><span class="w"> </span><span class="err">iOS</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"up"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfrom"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mid"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//TIZEN,</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">SERVER</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"up"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"from"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>친구가 터치중인 Heart에서 손을 떼면 이 이벤트를 받습니다.</p>
<h3 id='heart-android-ios-2'>Heart터치업 수신 데이터 (ANDROID, iOS)</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>mstate</td>
<td>&#39;up&#39;</td>
</tr>
<tr>
<td>mfrom</td>
<td>터치부터 터치업까지의 두근거림 수</td>
</tr>
<tr>
<td>muuid</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>curdate</td>
<td>이벤트 송신 시각</td>
</tr>
</tbody></table>
<h3 id='heart-tizen-http-server-2'>Heart터치업 수신 데이터 (TIZEN, HTTP SERVER)</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>&#39;up&#39;</td>
</tr>
<tr>
<td>from</td>
<td>터치부터 터치업까지의 두근거림 수</td>
</tr>
<tr>
<td>fromid</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>curdate</td>
<td>이벤트 송신 시각</td>
</tr>
</tbody></table>
<h2 id='heart-6'>heart 이벤트받기</h2><div class="highlight"><pre class="highlight http tab-http"><code><span class="err">
</span><span class="nf">POST</span> <span class="nn">/</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">YOUR-HOST-NAME</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">DKDK Service</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">close</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"heart"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"heart"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"user_nickname"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lat"</span><span class="p">:</span><span class="mf">123.132314</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lng"</span><span class="p">:</span><span class="mf">36.314123421</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alt"</span><span class="p">:</span><span class="mf">12.33</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<blockquote>
<p>JSON 구조로 송신합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//ANDROID,</span><span class="w"> </span><span class="err">iOS</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"heart"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_nickname"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lat"</span><span class="p">:</span><span class="mf">123.132314</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lng"</span><span class="p">:</span><span class="mf">36.314123421</span><span class="p">,</span><span class="w">
    </span><span class="nl">"alt"</span><span class="p">:</span><span class="mf">12.33</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//TIZEN,</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">SERVER</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"touch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_nickname"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lat"</span><span class="p">:</span><span class="mf">123.132314</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lng"</span><span class="p">:</span><span class="mf">36.314123421</span><span class="p">,</span><span class="w">
    </span><span class="nl">"alt"</span><span class="p">:</span><span class="mf">12.33</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>친구가 Heart를 터치하는 동안 이 이벤트를 받습니다.</p>
<h3 id='heart-android-ios-3'>heart 수신 데이터 (ANDROID, iOS)</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>mstate</td>
<td>&#39;heart&#39;</td>
</tr>
<tr>
<td>user_nickname</td>
<td>친구의 닉네임</td>
</tr>
<tr>
<td>muuid</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>친구의 패턴 UUID</td>
</tr>
<tr>
<td>curdate</td>
<td>heart 송신 시각</td>
</tr>
<tr>
<td>lat</td>
<td>Latitude 좌표를 입력합니다 (double)</td>
</tr>
<tr>
<td>lng</td>
<td>Longitude 좌표를 입력합니다 (double)</td>
</tr>
<tr>
<td>alt</td>
<td>고도(Altitude) 값을 입력합니다 (double)</td>
</tr>
</tbody></table>
<h3 id='heart-tizen-http-server-3'>heart 수신 데이터 (TIZEN, HTTP SERVER)</h3>
<table><thead>
<tr>
<th>파라메터</th>
<th>설명</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>&#39;heart&#39;</td>
</tr>
<tr>
<td>user_nickname</td>
<td>친구의 닉네임</td>
</tr>
<tr>
<td>fromid</td>
<td>친구의 user_uuid</td>
</tr>
<tr>
<td>pattern_uuid</td>
<td>친구의 패턴 uuid</td>
</tr>
<tr>
<td>curdate</td>
<td>heart 송신 시각</td>
</tr>
<tr>
<td>lat</td>
<td>Latitude 좌표를 입력합니다 (double)</td>
</tr>
<tr>
<td>lng</td>
<td>Longitude 좌표를 입력합니다 (double)</td>
</tr>
<tr>
<td>alt</td>
<td>고도(Altitude) 값을 입력합니다 (double)</td>
</tr>
</tbody></table>
<h1 id='805d652679'>푸시 메시지</h1><h2 id='dkdk-token'>사용자 토큰(dkdk-token)값 전송</h2>
<blockquote>
<p>JSON 구조로 송신합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//ANDROID,</span><span class="w"> </span><span class="err">iOS</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"secret"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfrom"</span><span class="p">:</span><span class="s2">"DKDK_TOKEN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mid"</span><span class="p">:</span><span class="s2">"FRIEND_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//TIZEN,</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">SERVER</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"secret"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"from"</span><span class="p">:</span><span class="s2">"DKDK_TOKEN"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div><h2 id='deprecated-8'>친구 요청 수신 [DEPRECATED]</h2>
<blockquote>
<p>JSON 구조로 송신합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//ANDROID,</span><span class="w"> </span><span class="err">iOS</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"request"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfrom"</span><span class="p">:</span><span class="s2">"FRIEND_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//TIZEN,</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">SERVER</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"request"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfrom"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="err">//수신한</span><span class="w"> </span><span class="err">전체</span><span class="w"> </span><span class="err">Heart의</span><span class="w"> </span><span class="err">수</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div><h2 id='touch'>두근거림 수신시: 터치(TOUCH)시</h2>
<blockquote>
<p>JSON 구조로 송신합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//ANDROID,</span><span class="w"> </span><span class="err">iOS</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"touch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mid"</span><span class="p">:</span><span class="s2">"FRIEND_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//TIZEN,</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">SERVER</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"secret"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"FRIEND_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pattern_uuid"</span><span class="p">:</span><span class="s2">"PATTERN_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div><h2 id='up'>두근거림 수신 종료시 : 업(UP)시</h2>
<blockquote>
<p>JSON 구조로 송신합니다:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w">
  </span><span class="err">//ANDROID,</span><span class="w"> </span><span class="err">iOS</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"mstate"</span><span class="p">:</span><span class="s2">"up"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"muuid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mid"</span><span class="p">:</span><span class="s2">"USER_NICKNAME"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfrom"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="err">//수신한</span><span class="w"> </span><span class="err">전체</span><span class="w"> </span><span class="err">Heart의</span><span class="w"> </span><span class="err">수</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

  </span><span class="err">//TIZEN,</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">SERVER</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"secret"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fromid"</span><span class="p">:</span><span class="s2">"USER_UUID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfrom"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="err">//수신한</span><span class="w"> </span><span class="err">전체</span><span class="w"> </span><span class="err">Heart의</span><span class="w"> </span><span class="err">수</span><span class="w">
    </span><span class="nl">"curdate"</span><span class="p">:</span><span class="s2">"2014-03-01 15:00:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span></code></pre></div><h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="http">http</a>
          </div>
      </div>
    </div>
  </body>
</html>
